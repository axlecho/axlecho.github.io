---
title: 通过反射去获取类的属性
date: 2019-01-12 14:24:19
categories: Android
tags:
    - java
---

以前打log喜欢用toString，然后自己重写toString的方法 比如有个类
```java
Diamond class Diamod {  
    String color;  
    String size;  
    @Override public String toString() { 
        return "color:" + color + " size:" + size; 
    } 
}
```

后来发现属性一多特别麻烦
想到反射可以查对于的属性名跟属性值，刚好可以用在这里(没处理异常)

```java
@Override public String toString() { 
    // 获取该类的所有属性值域 
    Field[] fields = this.getClass().getFields(); 
    for(Field field : fields) { 
        // 获取该属性名称与值 
        log += filed.getName() + filed.get(this); 
    } 
    return log; 
}

getFields public Field[] getFields() throws SecurityException
```
返回该类或接口所有访问权限为public的属性


但getFields()会把父类的域也打印出来，有时候还是希望父类子类分开 发现有另外一个方法getDeclaredFields()
```java
getDeclaredFields：
public Field[] getDeclaredFields() throws SecurityException
```
返回接口或类定义的所有属性的`Fileld`对象数组，包括public,protected,default(package),private访问权限的属性，但不包括继承的属性。数组里的元素没有经过排序，也没有特殊的顺序。假如类或接口没有声明属性，或该类代表一个原始的类型(Long等),array class或void，该方法返回一个长度为0的数组。

反射的跟权限访问有关系，跟final，static修饰符有关，具体关系以后在去探究。反射跟继承也有很多问题。有空测一下这东西。
